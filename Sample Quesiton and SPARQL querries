# 1.Object - Location/Footprint:
## 1.1 Where is the "Schlehdorf" gauging station located within the catchment area? [What are the coordinates]

PREFIX n4e_hyd: <https://nfdi4earth.pages.rwth-aachen.de/knowledgehub/nfdi4earth-ontology/test_hyd#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX schema: <https://schema.org/>
PREFIX locn: <http://www.w3.org/ns/locn#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX sosa: <http://www.w3.org/ns/sosa/>

SELECT ?name ?longitude ?latitude ?altitude
WHERE {
  ?sensor rdf:type sosa:Sensor ;
          schema:name "Bangs" ;
          locn:location ?location .
  
  ?location locn:geometry ?geometry .
  
  ?geometry locn:longitude ?longitude ;
            locn:latitude ?latitude ;
            geo:alt ?altitude .
  
  OPTIONAL {
    ?sensor schema:name ?name .
  }
}



1.2 Where are the gauging stations located within the catchment areas for high annual precipitation in 2015? (maximum 3) - ## must change with gauges and catchment relationship is solved. 

PREFIX n4e_hyd: <https://nfdi4earth.pages.rwth-aachen.de/knowledgehub/nfdi4earth-ontology/test_hyd#>
PREFIX sosa: <http://www.w3.org/ns/sosa/>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX envthes: <http://example.org/your/vocab/namespace#>
PREFIX qudt: <http://qudt.org/schema/qudt#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX locn: <http://www.w3.org/ns/locn#>
PREFIX unit: <http://qudt.org/vocab/unit#>

SELECT ?stationName ?catchmentArea ?longitude ?latitude ?altitude ?precipitation
WHERE {
  # Select observation of precipitation for 2015
  ?observation rdf:type sosa:Observation ;
               sosa:observedProperty envthes:30106 ;
               sosa:hasFeatureOfInterest ?catchmentArea ;
               sosa:madeBySensor ?station ;
               sosa:resultTime ?time ;
               sosa:hasResult ?result .
  
  # Filter for the year 2015
  FILTER (YEAR(?time) = 2015)

  # Get the numeric value of the precipitation result
  ?result rdf:type qudt:QuantityValue ;
          qudt:numericValue ?precipitation ;
          qudt:unit unit:MilliM .
  
  # Retrieve gauging station and location details
  ?station rdf:type sosa:Sensor ;
           schema:name ?stationName ;
           locn:location ?location .
  
  ?location locn:longitude ?longitude ;
            locn:latitude ?latitude ;
            geo:alt ?altitude .
}
ORDER BY DESC(?precipitation)
LIMIT 3

